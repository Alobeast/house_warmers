<h1>See all flats here</h1>
<p>Find me in app/views/flats/index.html.erb</p>


<%= form_tag flats_path, method: :get do %>

  <%= label_tag(:q, 'Budget maximum')%>
  <% price = ["", 500, 1000, 1500, 2000, 2500] %>
  <%= select_tag "rental_price", options_for_select(price, @rental_price)%>
  <%= label_tag(:q, "") %>

  <%= label_tag(:q, "Minimum size") %>
  <% size = ["", 25, 50, 75, 100, 125, 150] %>
  <%= select_tag "size", options_for_select(size, @size) %>
  <%= label_tag(:q, "") %>

  <%= label_tag(:q, "Where?") %>
  <% select_tag "location" %>
  <%= text_field_tag :location, params[:location]%>

  <%= label_tag(:q, "Minimum rating") %>
  <% rating = ["", 0, 1, 2, 3, 4, 5] %>
  <%= select_tag "rating", options_for_select(rating, @rating) %>

  <%= submit_tag "Search"%>
  <%= link_to "Remove filter", flats_path%>
<% end %>


<ul>
 <% @flats.each do |flat| %>
  <li>

  Address is <%= flat.address %>
  Number of bedrooms: <%= flat.bedrooms %>
  Price: <%= flat.rental_price %>
  Size: <%= flat.size %>
  <% flat.reviews.each do |review| %>
  <%= review.rating %>
  <% end %>

  <% if @flats.empty? %>
  <h2> No flats available </h2>
  <% end %>

  </li>
<% end %>

<div
  id="map"
  style="width: 50%;
  height: 450px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
></div>
